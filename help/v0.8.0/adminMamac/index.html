<!DOCTYPE html>
<html lang="en">

<head>
	<title>OED MAMAC help</title>
	<!-- link to main stylesheet -->
	<link rel="stylesheet" type="text/css" href="../../css/main.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">
</head>

<body>
	<div class="navbar">
		<a href="../../index.html"> <img id="logo" alt="OED logo" src="../../images/logo.png"></a>
		<a href="../../index.html">OED Website</a>
		<a href="index.html">help: </a>
		<a href="admin.html">Admin help:</a>
		<div class="dropdown">
			<button class="dropbtn">Conversions &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminConversionCreating.html">Creating Conversions</a>
				<a href="adminConversionEditing.html">Editing Conversions</a>
				<a href="adminConversionViewing.html">Viewing Conversions</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Groups &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminGroupCreating.html">Creating groups</a>
				<a href="adminGroupEditing.html">Editing groups</a>
				<a href="adminGroupViewing.html">Viewing groups</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Maps &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminMapCreating.html">Creating Maps</a>
				<a href="adminMapViewing.html">Viewing/editing Maps</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Meters &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminMeterCreating.html">Creating meters</a>
				<a href="adminMeterEditing.html">Editing meters</a>
				<a href="adminMeterViewing.html">Viewing meters</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Other &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminDataAcquisition.html">Data Acquisition</a>
				<a href="adminPreferences.html">Preferences</a>
				<a href="adminInstallation.html">Site Installation</a>
				<a href="adminOedUnits.html">Standard OED units and conversions</a>
				<a href="adminUser.html">Users</a>
				<a href="adminUnitInfo.html">Units and conversions setup/info</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Units &#x25BC;</button>
			<div class="dropdown-content">
				<a href="adminUnitCreating.html">Creating units</a>
				<a href="adminUnitEditing.html">Editing units</a>
				<a href="adminUnitViewing.html">Viewing units</a>
			</div>
		</div>
		<div class="dropdown">
			<button class="dropbtn">Help versions &#x25BC;</button>
			<div class="dropdown-content">
				<a href="../v1.0.0/adminMamac.html">OED version 1.0.0 Help</a>
				<a href="../v0.8.0/adminMamac.html">OED version 0.8.0 Help</a>
				<a href="../v0.7.0/adminMamac.html">OED version 0.7.0 Help</a>
				<a href="../v0.6.0/adminMamac.html">OED version 0.6.0 Help</a>
			</div>
		</div>
	</div>
	
	<div class="container"><div>
	<!-- Add version info at top of page. Would be nice if could put in layout but then relative link does not work. -->
	<p>The info on this page is for OED version 0.8.0. See "Help versions" menu at top of page for other versions.</p>
	<!-- Page content -->
	<h1>Admin MAMAC (Help)</h1>

	<h2 id="overview">Overview</h2>
	<p>This page describes how to add MAMAC meters to OED so they will be read regularly. This is normally done by an IT
		person during site setup. Additional meters can be added later in a similar way.</p>

	<h2 id="usage">Usage</h2>
	<p>Commands are all done in a terminal in the main OED directory.</p>
	<ol>
		<li>Add the MAMAC meters to OED:
			<ol>
				<li>Create a CSV file with a single column called "ip" with your meter IP addresses and copy it
					into the main OED directory where the project resides (where the README.md, etc. is located). These
					are the IPs
					of Mamac meters from which this OED instance
					will pull data. The file should look something like this (but with your IP addresses instead
					of the 127.0.0.1, etc.):</p>
					<pre lang="csv"><code>
ip
127.0.0.1
127.0.0.2
					</code></pre>
				</li>
				<li>Do:
					<code>docker compose exec web npm run addMamacMeters &lt;IPFileName&gt;.csv</code><br>where
					you
					replace &lt;IPFileName&gt; with whatever you named the file above with the IP addresses.
				</li>
				<li>You will need to wait for the hourly job (described on the <a href="adminInstallation.html">admin
						installation</a> page) to run or manually the update for
					the data as described below.</li>
			</ol>
		</li>
		<li>Set up the hourly cron job to update MAMAC meters data on OED.
			<ol>
				<li><code>cp src/scripts/updateMamacMetersOEDCron.bash /etc/cron.hourly/updateMamacMetersOEDCron.bash</code>
				</li>
				<li>Edit /etc/cron.hourly/updateMamacMetersOEDCron.bash to make the necessary modifications to
					the
					script. See the script for more detail.</li>
				<li>Do: <code>chmod +x /etc/cron.hourly/updateMamacMetersOEDCron.bash</code> to make the script
					executable.</li>
				<li>If you want to immediately run the update on meters without waiting for the hourly script
					you do: <code>docker compose exec web npm run updateMamacMeters</code></li>
				<li>Note that you will not be able to graph the newly acquired meter data until the daily
					aggregation (described on the installation page linked above) is run or you manually refresh the
					readings by doing:
					<code>docker compose exec web npm run refreshAllReadingViews</code>
				</li>
			</ol>
		</li>
	</ol>

	<h2 id="details">Details</h2>
	<p>None at this time.</p>
</div></div>
	<footer>
		<div class="navbar">
			<a href="mailto:help@OpenEnergyDashboard.org">Email OED Help or comments on these
				pages</a>
			<a href="https://github.com/OpenEnergyDashboard/OED" target="_blank" rel="noopener noreferrer">GitHub
				Repository</a>
		</div>
		<p>This page is part of the Open Energy Dashboard and is subject to the terms of the Mozilla Public
			License,
			v. 2.0. If a copy of the MPL was not distributed with this file, you can obtain one at <a
				href="https://www.mozilla.org/en-US/MPL/2.0/" rel="nofollow">https://www.mozilla.org/en-US/MPL/2.0/</a>.
		</p>
	</footer>
</body>

</html>
